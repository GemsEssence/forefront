<%# Add the new activity to the top of the list %>
<%= turbo_stream.prepend "activities_list_#{@actable.id}" do %>
  <%= render "forefront/activities/activity", activity: @activity, index: 0, total: @activities.length %>
<% end %>

<%# Update the activities list container if it was empty before (first activity) %>
<% if @activities.length == 1 %>
  <%= turbo_stream.replace "activities_list_container_#{@actable.id}" do %>
    <%= render "forefront/activities/list", activities: @activities, actable: @actable %>
  <% end %>
<% end %>

<%# Reset the form %>
<%= turbo_stream.replace "activity_form_#{@actable.id}" do %>
  <%= render "forefront/activities/form", actable: @actable %>
<% end %>

<%# Show success message %>
<%= turbo_stream.append "flash_messages" do %>
  <div class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded relative mb-4" role="alert">
    <span class="block sm:inline">Activity was successfully created.</span>
    <button type="button" class="absolute top-0 bottom-0 right-0 px-4 py-3" onclick="this.parentElement.remove()">
      <span class="sr-only">Dismiss</span>
      <svg class="h-6 w-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
<% end %>

